<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Курс: Основы цифрового маркетинга</title>
    <link rel="icon" type="image/png" href="{{ url_for('images', filename='icon.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='additional_styles.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=PT+Serif+Caption:ital@0;1&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="index-logo">
            <a href="/">
                <img src="{{ url_for('images', filename='container-logo-img.png') }}" alt="Главное изображение"> 
            </a>
        </div>
        <div class="container">
            <h1>Курс: Основы цифрового маркетинга</h1>
        </div>

        <div class="user-info">
            <span id="username" class="username">{{ session.get('username', 'Гость') }}</span>
            {% if session.get('username') %}
                <span class="user-role" style="margin-left: 10px;">({{ ROLE_TRANSLATIONS[session.get('role')] if session.get('role') in ROLE_TRANSLATIONS else session.get('role') }})</span>
                {% if session.get('role') == 'teacher' %}
                    <a href="{{ url_for('add_video') }}" class="btn" id="add-video-btn" style="margin-left: 20px;">Добавить видео</a>
                {% endif %}
                <a href="/logout" id="logout-link" class="btn" style="margin-left: 20px;">Выход</a>
            {% else %}
                <a href="/login" class="btn" id="login-btn">Вход</a>
                <span>|</span>
                <a href="/register" class="btn" id="register-btn">Регистрация</a>
            {% endif %}
        </div>

    </header>

    <main>
        <div class="container">
            <div class="header-container">
                <h2>Видеоуроки</h2>
                <div class="search-container">
                    <input type="text" id="searchInput" class="search-input" placeholder="Поиск видео..." oninput="searchVideos()">
                </div>
            </div>
            <div class="video-grid" id="videoGrid">
                <div class="video-card" 
                     data-title="Введение в цифровой маркетинг" 
                     data-description="Изучите стратегии и инструменты цифрового маркетинга." 
                     data-details="Длительность: 10:00, Дата публикации: 01.01.2025, Автор: Алексей Смирнов" 
                     onclick="openModal('videos/digital-marketing-intro.mp4', 'Введение в цифровой маркетинг', 'Изучите стратегии и инструменты цифрового маркетинга.', 'Длительность: 10:00, Дата публикации: 01.01.2025, Автор: Алексей Смирнов')">
                    <canvas class="video-preview" id="previewCanvas1" data-placeholder="{{ url_for('images', filename='video_placeholder.jpg') }}"></canvas>
                    <h3>Введение в цифровой маркетинг</h3>
                    <p>Изучите стратегии и инструменты цифрового маркетинга.</p>
                </div>
                <div class="video-card" 
                     data-title="SEO основы" 
                     data-description="Научитесь оптимизировать сайты для поисковых систем." 
                     data-details="Длительность: 12:00, Дата публикации: 02.01.2025, Автор: Мария Петрова" 
                     onclick="openModal('videos/digital-marketing-seo.mp4', 'SEO основы', 'Научитесь оптимизировать сайты для поисковых систем.', 'Длительность: 12:00, Дата публикации: 02.01.2025, Автор: Мария Петрова')">
                    <canvas class="video-preview" id="previewCanvas2" data-placeholder="{{ url_for('images', filename='video_placeholder.jpg') }}"></canvas>
                    <h3>SEO основы</h3>
                    <p>Научитесь оптимизировать сайты для поисковых систем.</p>
                </div>
                <div class="video-card" 
                     data-title="Контент-маркетинг" 
                     data-description="Создание и продвижение контента для привлечения клиентов." 
                     data-details="Длительность: 15:00, Дата публикации: 03.01.2025, Автор: Сергей Кузнецов" 
                     onclick="openModal('videos/digital-marketing-content.mp4', 'Контент-маркетинг', 'Создание и продвижение контента для привлечения клиентов.', 'Длительность: 15:00, Дата публикации: 03.01.2025, Автор: Сергей Кузнецов')">
                    <canvas class="video-preview" id="previewCanvas3" data-placeholder="{{ url_for('images', filename='video_placeholder.jpg') }}"></canvas>
                    <h3>Контент-маркетинг</h3>
                    <p>Создание и продвижение контента для привлечения клиентов.</p>
                </div>
                <div class="video-card" 
                     data-title="Социальные сети" 
                     data-description="Как использовать социальные сети для бизнеса." 
                     data-details="Длительность: 10:00, Дата публикации: 04.01.2025, Автор: Анна Иванова" 
                     onclick="openModal('videos/digital-marketing-social-media.mp4', 'Социальные сети', 'Как использовать социальные сети для бизнеса.', 'Длительность: 10:00, Дата публикации: 04.01.2025, Автор: Анна Иванова')">
                    <canvas class="video-preview" id="previewCanvas4" data-placeholder="{{ url_for('images', filename='video_placeholder.jpg') }}"></canvas>
                    <h3>Социальные сети</h3>
                    <p>Как использовать социальные сети для бизнеса.</p>
                </div>
                <div class="video-card" 
                     data-title="Email-маркетинг" 
                     data-description="Создание эффективных email-кампаний." 
                     data-details="Длительность: 8:00, Дата публикации: 05.01.2025, Автор: Дмитрий Федоров" 
                     onclick="openModal('videos/digital-marketing-email.mp4', 'Email-маркетинг', 'Создание эффективных email-кампаний.', 'Длительность: 8:00, Дата публикации: 05.01.2025, Автор: Дмитрий Федоров')">
                    <canvas class="video-preview" id="previewCanvas5" data-placeholder="{{ url_for('images', filename='video_placeholder.jpg') }}"></canvas>
                    <h3>Email-маркетинг</h3>
                    <p>Создание эффективных email-кампаний.</p>
                </div>
                <div class="video-card" 
                     data-title="Аналитика в цифровом маркетинге" 
                     data-description="Как использовать аналитику для улучшения маркетинговых стратегий." 
                     data-details="Длительность: 14:00, Дата публикации: 06.01.2025, Автор: Ирина Сидорова" 
                     onclick="openModal('videos/digital-marketing-analytics.mp4', 'Аналитика в цифровом маркетинге', 'Как использовать аналитику для улучшения маркетинговых стратегий.', 'Длительность: 14:00, Дата публикации: 06.01.2025, Автор: Ирина Сидорова')">
                    <canvas class="video-preview" id="previewCanvas6" data-placeholder="{{ url_for('images', filename='video_placeholder.jpg') }}"></canvas>
                    <h3>Аналитика в цифровом маркетинге</h3>
                    <p>Как использовать аналитику для улучшения маркетинговых стратегий.</p>
                </div>
            </div>
        </div>
    </main>

    <div id="videoModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle"></h2>
            <video id="modalVideo" width="100%" controls>
                <source id="videoSource" type="video/mp4">
                Ваш браузер не поддерживает видео.
            </video>
            <div class="video-description" id="videoDescription"></div>
            <div class="video-details" id="videoDetails"></div>
            <div class="likes-container">
                <div class="likes">
                    <span class="like-icon" onclick="likeVideo(event)">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368">
                            <path d="M720-120H280v-520l280-280 50 50q7 7 11.5 19t4.5 23v14l-44 174h258q32 0 56 24t24 56v80q0 7-2 15t-4 15L794-168q-9 20-30 34t-44 14Zm-360-80h360l120-280v-80H480l54-220-174 174v406Zm0-406v406-406Zm-80-34v80H160v360h120v80H80v-520h200Z"/>
                        </svg>
                    </span>
                    <span class="like-count" id="likeCount">0</span>
                    <span class="dislike-icon" onclick="dislikeVideo(event)">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#5f6368">
                            <path d="M240-840h440v520L400-40l-50-50q-7-7-11.5-19t-4.5-23v-14l44-174H120q-32 0-56-24t-24-56v-80q0-7 2-15t4-15l120-282q9-20 30-34t44-14Zm360 80H240L120-480v80h360l-54 220 174-174v-406Zm0 406v-406 406Zm80 34v-80h120v-360H680v-80h200v520H680Z"/>
                        </svg>
                    </span>
                    <span class="dislike-count" id="dislikeCount">0</span>
                </div>
                <button class="share-button" onclick="shareVideo()">Поделиться</button>
            </div>
            <div class="comments">
                <h4>Комментарии:</h4>
                <textarea id="commentInput" class="comment-input" placeholder="Ваш комментарий..."></textarea>
                <button class="submit-comment" onclick="submitComment()">Отправить</button>
                <div class="error-message" id="error-message"></div>
                <h4>Все комментарии</h4> 
                <div id="commentList" class="comment-list"></div>
            </div>
        </div>
    </div>    

    <button class="back-to-top" onclick="scrollToTop()">Вернуться наверх</button>

    <footer>
        <div class="container">
            <p>&copy; <span id="currentYear"></span> Учебный Видеохостинг ГБПОУ КАИТ20</p>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
